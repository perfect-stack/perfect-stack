<div class="container-fluid paris-layout-style" *ngIf="ctx">
  <div class="d-flex justify-content-between">
    <div>
      <a class="back-link" [routerLink]="['/data', ctx.metaEntity.name, 'search']">
        <span class="material-symbols-outlined align-middle">keyboard_backspace</span>
        <span class="align-middle">Search {{ctx.metaEntity.pluralName.toLowerCase()}}</span>
      </a>

      <!--<h2 class="my-3" *ngIf="ctx.formMap">
        <lib-expression-control [mode]="ctx.mode" [formMap]="ctx.formMap" [expression]="ctx.metaPage.title" ></lib-expression-control>
      </h2>-->
      <div class="my-3">
        <lib-page-title-tool [ctx]="ctx"></lib-page-title-tool>
      </div>
    </div>
    <div>
      <ng-content select="[TopRightActions]"></ng-content>
    </div>
  </div>

  <div class="container-fluid mt-3 bg-light shadow-sm border">
    <div class="row" *ngFor="let template of ctx.metaPage.templates; index as i">

      <ng-container *ngIf="template.templateHeading">
        <div class="row template">
          <div class="col-4">
            <h4 id="template[{{i}}].sectionHdg">{{template.templateHeading}}</h4>
          </div>
          <div class="col-8">
            <lib-controller [ctx]="ctx" [template]="template" [showTemplateHeadings]="false"></lib-controller>
          </div>
        </div>
      </ng-container>

      <ng-container *ngIf="!template.templateHeading">
        <div class="col-12 p-0 bg-warning">
          <lib-controller [ctx]="ctx" [template]="template" [showTemplateHeadings]="false"></lib-controller>
        </div>
      </ng-container>
    </div>

    <div class="d-flex justify-content-between my-3">
      <div>
        <!-- Bottom left actions would go here -->
      </div>
      <div>
        <ng-content select="[BottomRightActions]"></ng-content>
      </div>
    </div>
  </div>

  <div class="flex-grow-1">
    <lib-audit-view [mode]="'view'" [entityId]="ctx.id"></lib-audit-view>
  </div>

  <lib-version [style]="'Footer'"></lib-version>
</div>

