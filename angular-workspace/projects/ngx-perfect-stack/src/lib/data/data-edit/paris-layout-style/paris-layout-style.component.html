<div class="container-fluid paris-layout-style" *ngIf="ctx">
  <div class="d-flex justify-content-between">
    <div>
      <a [routerLink]="['/data', ctx.metaEntity.name, 'search']">
        <span class="material-icons align-middle">keyboard_backspace</span>
        <span class="align-middle">Search {{ctx.metaEntity.name.toLowerCase()}}</span>
      </a>

      <h2 class="my-3">
        <lib-expression-control [mode]="ctx.mode" [formGroup]="ctx.entityForm" [expression]="ctx.metaPage.title" ></lib-expression-control>
      </h2>
    </div>
    <div>
      <ng-content select="[TopRightActions]"></ng-content>
    </div>
  </div>

  <div class="container-fluid mt-3 bg-light shadow-sm border">
    <div class="row template" *ngFor="let template of ctx.metaPage.templates; index as i">
      <div class="col-4">
        <h4 class="mt-3" id="template[{{i}}].sectionHdg">{{template.templateHeading}}</h4>
      </div>
      <div class="col-8">
        <lib-controller [ctx]="ctx" [template]="template">
          <ng-container BottomRightActions>
            <ng-content select="[BottomRightActions]"></ng-content>
          </ng-container>
        </lib-controller>
      </div>
    </div>
  </div>

  <ng-container *ngIf="ctx.mode === 'view'">
    <lib-audit-view [entityId]="ctx.id"></lib-audit-view>
  </ng-container>
</div>

