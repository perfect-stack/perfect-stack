<!--suppress XmlDuplicatedId -->
<ng-container *ngIf="ctx$ | async as ctx">

  <ng-container *ngIf="debugService.ON">
    <p class="small">layoutStyle: {{ctx.metaPage.layoutStyle}}, mode: {{mode}}</p>
  </ng-container>

  <ng-container [ngSwitch]="ctx.metaPage.layoutStyle">

    <!-- Paris layout style -->
    <ng-container *ngSwitchCase="'Paris'">
      <lib-paris-layout-style [ctx]="ctx">
        <ng-container TopRightActions>
          <div class="h-100 d-flex align-items-center" *ngIf="mode === 'view'" >
            <button type="submit" class="btn btn-outline-primary" (click)="onEdit()" id="editBtn">Edit {{ctx.metaEntity.name.toLowerCase()}}</button>
          </div>
        </ng-container>
        <ng-container BottomRightActions>
          <div class="mt-2" *ngIf="mode === 'edit'">
            <button type="button" class="btn btn-outline-primary me-2" (click)="onCancel()" id="cancelBtn">Cancel</button>
            <!--<button type="submit" class="btn btn-primary me-2" [disabled]="!ctx.entityForm.valid" (click)="onSave(ctx)" id="saveBtn">Save details</button>-->
            <button type="submit" class="btn btn-primary me-2" (click)="onSave(ctx)" id="saveBtn">Save details</button>
          </div>
        </ng-container>
      </lib-paris-layout-style>
    </ng-container>

    <!-- Stockholm layout style -->
    <ng-container *ngSwitchCase="'Stockholm'">
      <lib-stockholm-layout-style [ctx]="ctx"></lib-stockholm-layout-style>
    </ng-container>

    <!-- New York is the default layout style -->
    <ng-container *ngSwitchDefault>
      <lib-new-york-layout-style [ctx]="ctx">
        <ng-container BottomRightActions [ngSwitch]="mode">
          <div class="mt-2" *ngSwitchCase="'view'">
            <button type="button" class="btn btn-outline-primary me-2" (click)="onBack()" id="backBtn">Back</button>
            <button type="submit" class="btn btn-primary me-2" (click)="onEdit()" id="editBtn">Edit</button>
          </div>
          <div class="mt-2" *ngSwitchCase="'edit'">
            <button type="button" class="btn btn-outline-primary me-2" (click)="onCancel()" id="cancelBtn">Cancel</button>
            <button type="submit" class="btn btn-primary me-2" [disabled]="!ctx.entityForm.valid" (click)="onSave(ctx)" id="saveBtn">Save</button>
          </div>
        </ng-container>
      </lib-new-york-layout-style>
    </ng-container>
  </ng-container>

  <!-- whitespace padding at bottom of page -->
  <div class="my-5 py-5"></div>
</ng-container>
