<!--suppress XmlDuplicatedId -->
<div class="d-flex flex-column h-100">
  <div class="flex-grow-1" *ngIf="ctx$ | async as ctx">

    <ng-container *ngIf="debugService.ON">
      <p class="small">layoutStyle: {{ctx.metaPage.layoutStyle}}, mode: {{mode}}</p>
    </ng-container>

    <ng-container [ngSwitch]="ctx.metaPage.layoutStyle">

      <!-- Paris layout style -->
      <ng-container *ngSwitchCase="'Paris'">
        <lib-paris-layout-style [ctx]="ctx">
          <ng-container TopRightActions>
            <div class="h-100 d-flex align-items-center" *ngIf="mode === 'view'" >
              <lib-permission-check [action]="ActionType.Edit" [subject]="metaName">
                <button type="submit" class="btn btn-outline-primary" (click)="onEdit()" id="editBtn">Edit {{ctx.metaEntity.name.toLowerCase()}}</button>
              </lib-permission-check>
            </div>
          </ng-container>
          <ng-container BottomRightActions>
            <div class="mt-2" *ngIf="mode === 'edit'">
              <lib-permission-check [action]="ActionType.Edit" [subject]="metaName">
                <button type="button" class="btn btn-outline-primary me-2" (click)="onCancel(ctx)" id="cancelBtn">Cancel</button>
                <button type="submit" class="btn btn-primary me-2" [disabled]="isSaveDisabled(ctx)" (click)="onSave(ctx)" id="saveBtn">Save details</button>
              </lib-permission-check>
            </div>
          </ng-container>
        </lib-paris-layout-style>
      </ng-container>

      <!-- Stockholm layout style -->
      <ng-container *ngSwitchCase="'Stockholm'">
        <lib-stockholm-layout-style [ctx]="ctx">
          <ng-container TopRightActions>
            <div class="h-100 d-flex align-items-center" *ngIf="mode === 'view'" >
              <lib-permission-check [action]="ActionType.Edit" [subject]="metaName">
                <button type="submit" class="btn btn-outline-primary" (click)="onEdit()" id="editBtn">Edit {{ctx.metaEntity.name.toLowerCase()}}</button>
              </lib-permission-check>
            </div>
          </ng-container>
          <ng-container BottomRightActions>
            <div class="mt-2" *ngIf="mode === 'edit'">
              <lib-permission-check [action]="ActionType.Edit" [subject]="metaName">
                <button type="button" class="btn btn-outline-primary me-2" (click)="onCancel(ctx)" id="cancelBtn">Cancel</button>
                <button type="submit" class="btn btn-primary me-2" [disabled]="isSaveDisabled(ctx)" (click)="onSave(ctx)" id="saveBtn">Save details</button>
              </lib-permission-check>
            </div>
          </ng-container>
        </lib-stockholm-layout-style>
      </ng-container>

      <!-- Venice layout style -->
      <ng-container *ngSwitchCase="'Venice'">
        <lib-venice-layout-style [ctx]="ctx"></lib-venice-layout-style>
      </ng-container>


      <!-- New York is the default layout style -->
      <ng-container *ngSwitchDefault>
        <lib-new-york-layout-style [ctx]="ctx">
          <ng-container BottomRightActions [ngSwitch]="mode">
            <div class="mt-2" *ngSwitchCase="'view'">
              <button type="button" class="btn btn-outline-primary me-2" (click)="onBack()" id="backBtn">Back</button>
              <lib-permission-check [action]="ActionType.Edit" [subject]="metaName">
                <button type="submit" class="btn btn-primary me-2" (click)="onEdit()" id="editBtn">Edit</button>
              </lib-permission-check>
            </div>
            <div class="mt-2" *ngSwitchCase="'edit'">
              <lib-permission-check [action]="ActionType.Edit" [subject]="metaName">
                <button type="button" class="btn btn-outline-primary me-2" (click)="onCancel(ctx)" id="cancelBtn">Cancel</button>
                <button type="submit" class="btn btn-primary me-2" [disabled]="isSaveDisabled(ctx)" (click)="onSave(ctx)" id="saveBtn">Save</button>
              </lib-permission-check>
            </div>
          </ng-container>
        </lib-new-york-layout-style>
      </ng-container>
    </ng-container>
  </div>
</div>

