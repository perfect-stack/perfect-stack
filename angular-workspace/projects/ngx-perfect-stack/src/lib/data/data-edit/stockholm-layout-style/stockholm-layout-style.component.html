<ng-container *ngIf="ctx">

  <div class="container-fluid stockholm-layout-style">
    <!--<div class="d-flex justify-content-between my-2">
      <a class="back-link" [routerLink]="['/data', ctx.metaEntity.name, 'search']">
        <span class="material-symbols-outlined align-middle">keyboard_backspace</span>
        <span class="align-middle">Search {{ctx.metaEntity.pluralName.toLowerCase()}}</span>
      </a>

      &lt;!&ndash; Remember: there are different titles at different levels, so this may or may not appear depending on page meta data &ndash;&gt;
      <h2 id="sectionHdg" *ngIf="ctx.metaPage.title">{{ctx.metaPage.title}}</h2>

      <ng-container *ngIf="ctx.metaPage && ctx.metaPage.templates">
        <lib-tool-view [tool]="ctx.metaPage.templates[0].locations[TemplateLocationType.OuterTopRight]"></lib-tool-view>
      </ng-container>
    </div>-->

    <ng-container *ngFor="let template of ctx.metaPage.templates; index as i">
      <ng-container [ngSwitch]="template.type">
        <div *ngSwitchCase="'header'">
          <lib-controller [ctx]="ctx" [template]="template" [showTemplateHeadings]="false"></lib-controller>
        </div>

        <div class="p-4 bg-light shadow-sm border" *ngSwitchDefault>
          <div class="row template">
            <div class="col-4">
              <h4 id="template[{{i}}].sectionHdg">{{template.templateHeading}}</h4>
            </div>
            <div class="col-8">
              <lib-controller [ctx]="ctx" [template]="template" [showTemplateHeadings]="false"></lib-controller>
            </div>
          </div>
        </div>
      </ng-container>
    </ng-container>

    <lib-audit-view [mode]="'view'" [entityId]="ctx.id"></lib-audit-view>
  </div>

</ng-container>
