<div class="container-fluid container-page" *ngIf="ctx$ | async as ctx">

  <ng-container *ngIf="searchCriteriaTemplate">
    <div class="d-flex justify-content-between">
      <div>
        <h3>{{ctx.metaPage.title}}</h3>
      </div>
      <div>
        <button type="submit" class="btn btn-success" (click)="onNew(ctx)">{{newButtonLbl}}</button>
      </div>
    </div>

    <div class="container-fluid container-form">
      <lib-controller [ctx]="ctx" [template]="searchCriteriaTemplate">
        <ng-container BottomLeftActions>
        </ng-container>
        <ng-container BottomRightActions>
          <button class="btn btn-outline-primary me-2" (click)="onReset(ctx)">Reset</button>
          <button type="submit" class="btn btn-primary" (click)="onSearch(ctx)">Search</button>
        </ng-container>
      </lib-controller>
    </div>
  </ng-container>

  <div class="container-table" *ngIf="resultTableCells">

    <div class="collection-size-found">
      {{collectionSize}} #todo found
    </div>

    <table class="table table-hover">
      <thead>
      <tr>
        <th scope="col" *ngFor="let nextCell of resultTableCells[0]">
          <ng-container *ngIf="nextCell.attribute">
            {{nextCell.attribute.label}}
          </ng-container>
        </th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let item of searchResults" (click)="onSelectRow(item.id)">
        <td *ngFor="let nextCell of resultTableCells[0]">
          <ng-container *ngIf="nextCell.attribute">
            {{displayValue(nextCell.attribute, item)}}
          </ng-container>
        </td>
      </tr>
      </tbody>
    </table>

    <ngb-pagination class="d-flex justify-content-center" [collectionSize]="collectionSize" [maxSize]="5" [(page)]="pageNumber" [pageSize]="pageSize" (pageChange)="onSearch(ctx)">
      <ng-template ngbPaginationFirst>First</ng-template>
      <ng-template ngbPaginationLast>Last</ng-template>
      <ng-template ngbPaginationPrevious>Previous</ng-template>
      <ng-template ngbPaginationNext>Next</ng-template>
      <ng-template ngbPaginationEllipsis>...</ng-template>
      <ng-template ngbPaginationNumber let-page>{{ page }}</ng-template>
    </ngb-pagination>
  </div>

</div>
