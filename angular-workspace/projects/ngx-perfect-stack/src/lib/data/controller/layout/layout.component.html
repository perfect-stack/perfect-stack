<ng-container *ngIf="ctx && template">

  <ng-container *ngIf="showTemplateHeadings && template.templateHeading && mode">
    <ng-container *ngIf="template.templateHeading === '${bird.name}'">
      <h3 class="text-center">
        <!-- TODO: this one is here to center the Bird view heading, needs to be removed and turned into something like a Text Tool with meta data styles for text-center -->
        <lib-expression-control [mode]="mode" [formMap]="ctx.formMap" [expression]="template.templateHeading"></lib-expression-control>
      </h3>
    </ng-container>
    <ng-container *ngIf="template.templateHeading !== '${bird.name}'">
      <h3>
        <lib-expression-control [mode]="mode" [formMap]="ctx.formMap" [expression]="template.templateHeading"></lib-expression-control>
      </h3>
    </ng-container>
  </ng-container>

  <ng-container *ngIf="debugService.ON">
    <p class="small">LayoutComponent: {{template.type}} - {{template.binding}}</p>
  </ng-container>

  <ng-container [ngSwitch]="template.type">
    <lib-form-layout
      *ngSwitchCase="'form'"
      [ctx]="ctx"
      [metaEntity]="metaEntity"
      [template]="template">
    </lib-form-layout>

    <lib-table-layout
      *ngSwitchCase="'table'"
      [ctx]="ctx"
      [template]="template"
      [mode]="mode"
      [formGroup]="formGroup"
      [relationshipProperty]="relationshipProperty">
    </lib-table-layout>

    <lib-card-layout
      *ngSwitchCase="'card'"
      [mode]="mode"
      [formGroup]="formGroup"
      [relationshipProperty]="relationshipProperty">
    </lib-card-layout>
  </ng-container>

  <div class="mt-2" *ngIf="template.locations">
    <div class="d-flex">
      <div class="flex-grow-1" *ngIf="template.locations[TemplateLocationType.BottomLeft]">
        <lib-tool-view [tool]="template.locations[TemplateLocationType.BottomLeft]" [ctx]="ctx"></lib-tool-view>
      </div>

      <div class="flex-grow-1" *ngIf="template.locations[TemplateLocationType.BottomMiddle]">
        <lib-tool-view [tool]="template.locations[TemplateLocationType.BottomMiddle]" [ctx]="ctx"></lib-tool-view>
      </div>

      <div class="flex-grow-1" *ngIf="template.locations[TemplateLocationType.BottomRight]">
        <lib-tool-view [tool]="template.locations[TemplateLocationType.BottomRight]" [ctx]="ctx"></lib-tool-view>
      </div>
    </div>
  </div>
</ng-container>

