<div class="d-flex flex-column pt-3 h-100">
  <div class="flex-grow-1 border-footer pb-4" *ngIf="mode == 'view'">
    <div class="d-flex align-items-center link-primary" (click)="toggleShowRecords()" id="showAuditRecords" *ngIf="!showRecords">
      <span class="p-0 material-symbols-outlined">chevron_right</span>
      Show audit records
    </div>

    <ng-container *ngIf="showRecords">

      <div class="d-flex align-items-center link-primary" (click)="toggleShowRecords()" id="hideAuditRecords">
        <span class="material-symbols-outlined">expand_more</span>
        Hide audit records
      </div>

      <ng-container *ngIf="auditRecords$ | async as auditRecords">
        <table class="table table-sm mt-3" style="width: 24em;">
          <thead>
          <th>Datetime</th>
          <th>Action</th>
          <th>Person</th>
          </thead>
          <tbody *ngIf="auditRecords && auditRecords.length > 0">
          <tr *ngFor="let record of auditRecords">
            <td>{{toDisplayTime(record.date_time)}}</td>
            <td>{{record.action}}</td>
            <td>{{record.person_name}}</td>
          </tr>
          </tbody>

          <tbody *ngIf="auditRecords && auditRecords.length === 0">
          <tr>
            <td colspan="3">No records found.</td>
          </tr>
          </tbody>
        </table>
      </ng-container>

    </ng-container>
  </div>

</div>
