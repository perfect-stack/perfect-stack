<div class="container-fluid mt-3">
  <div class="bg-light shadow-sm border py-3 px-2" *ngIf="metaPage$ | async as metaPage">

    <h2>Page Edit</h2>

    <form class="form mb-2" #form="ngForm" [formGroup]="metaPageForm">
      <div class="row">
        <div class="col-2">
          <label class="form-label" for="name">Name</label>
          <input class="form-control" type="text" id="name" formControlName="name">
        </div>

        <div class="col-2">
          <label class="form-label" for="title">Title</label>
          <input class="form-control" type="text" id="title" formControlName="title">
        </div>

        <div class="col-2">
          <label class="form-label" for="type">Type</label>
          <select class="form-select" id="type" formControlName="type">
            <option *ngFor="let o of getPageTypeOptions()" [ngValue]="o">{{o}}</option>
          </select>
        </div>

        <div class="col-2">
          <label class="form-label" for="layoutStyle">Layout style</label>
          <select class="form-select" id="layoutStyle" formControlName="layoutStyle">
            <option *ngFor="let o of getLayoutStyleOptions()" [ngValue]="o">{{o}}</option>
          </select>
        </div>
      </div>
    </form>

    <lib-data-query-map [dataQueryList]="dataQueryList"></lib-data-query-map>

    <h4>Templates</h4>
    <ng-container *ngFor="let nextTemplate of templates">
      <div class="row">
        <div class="col-10">
          <lib-template-controller [template]="nextTemplate"></lib-template-controller>
        </div>

        <div class="col-2 border-left border-dark">
          <lib-attribute-palette></lib-attribute-palette>
        </div>
      </div>
    </ng-container>

    <div class="d-flex my-5">
      <button class="btn btn-outline-success" (click)="onAddTemplate()">Add Template</button>
      <div class="flex-grow-1"></div>
      <button class="btn btn-danger me-2" (click)="onDelete(metaPage)">Delete</button>
      <button class="btn btn-outline-secondary me-2" (click)="onCancel()">Cancel</button>
      <button class="btn btn-primary" (click)="onSave()">Save</button>
    </div>

  </div>
</div>

<!--<hr>
<div class="drag-border">drag-border</div>
<div class="drag-handle">drag-handle</div>
<div class="drag-handle:active">drag-handle:active</div>
<div class="drag-hint-border">drag-hint-border</div>
<div class="drag-over-border">drag-over-border</div>
<div class="drag-transit">drag-transit</div>-->
