{
  "name": "Event",
  "pluralName": "Events",
  "icon": "",
  "type": "Database",
  "rootNode": true,
  "timestamps": true,
  "cacheExpiryInSecs": "",
  "permanentDelete": false,
  "attributes": [
    {
      "type": "Identifier",
      "visibility": "Hidden",
      "name": "id",
      "label": "Id",
      "description": "",
      "unitOfMeasure": "",
      "scale": "",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "",
      "typeaheadSearch": [],
      "rules": []
    },
    {
      "type": "Html",
      "visibility": "Visible",
      "name": "comments",
      "label": "Comments",
      "description": "General comments regarding the event",
      "unitOfMeasure": "",
      "scale": "",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "",
      "typeaheadSearch": [],
      "rules": []
    },
    {
      "type": "OneToMany",
      "visibility": "Visible",
      "name": "observers",
      "label": "Observers",
      "description": "Observers at the event",
      "unitOfMeasure": "",
      "scale": "",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "EventObserver",
      "typeaheadSearch": [],
      "rules": []
    },
    {
      "type": "ManyToOne",
      "visibility": "Visible",
      "name": "location",
      "label": "Location",
      "description": "Location of the event",
      "unitOfMeasure": "",
      "scale": "",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "Location",
      "typeaheadSearch": [
        "location_name"
      ],
      "rules": [
        {
          "type": "Custom",
          "config": "EventLocationRule"
        }
      ]
    },
    {
      "type": "OneToPoly",
      "visibility": "Visible",
      "name": "activities",
      "label": "Activities",
      "description": "Activities for the event",
      "unitOfMeasure": "",
      "scale": "",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "",
      "typeaheadSearch": [],
      "rules": [],
      "discriminator": {
        "discriminatorName": "activity_type",
        "discriminatorType": "ActivityType",
        "entityMappingList": [
          {
            "discriminatorValue": "Health",
            "metaEntityName": "HealthActivity"
          },
          {
            "discriminatorValue": "Measurement",
            "metaEntityName": "MeasurementActivity"
          },
          {
            "discriminatorValue": "Weight",
            "metaEntityName": "WeightActivity"
          },
          {
            "discriminatorValue": "Banding",
            "metaEntityName": "BandingActivity"
          },
          {
            "discriminatorValue": "Microchip",
            "metaEntityName": "MicrochipActivity"
          },
          {
            "discriminatorValue": "Weather",
            "metaEntityName": "WeatherActivity"
          }
        ]
      }
    },
    {
      "type": "Double",
      "visibility": "Required",
      "name": "northing",
      "label": "Northing",
      "description": "Grid coordinate Northing using NZTM",
      "unitOfMeasure": "",
      "scale": "0",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "",
      "typeaheadSearch": [],
      "rules": [
        {
          "type": "Required",
          "config": ""
        },
        {
          "type": "Range",
          "config": "4748000,6192000"
        }
      ]
    },
    {
      "type": "Double",
      "visibility": "Required",
      "name": "easting",
      "label": "Easting",
      "description": "Grid coordinate easting using NZTM",
      "unitOfMeasure": "",
      "scale": "0",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "",
      "typeaheadSearch": [],
      "rules": [
        {
          "type": "Required",
          "config": ""
        },
        {
          "type": "Range",
          "config": "1090000,2090000"
        }
      ]
    },
    {
      "type": "ManyToOne",
      "visibility": "Visible",
      "name": "bird",
      "label": "Bird",
      "description": "The bird (optional) that this event is for",
      "unitOfMeasure": "",
      "scale": "",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "Bird",
      "typeaheadSearch": [
        "name",
        "band",
        "microchip",
        "wing_tag"
      ],
      "rules": []
    },
    {
      "type": "Enumeration",
      "visibility": "Required",
      "name": "event_type",
      "label": "Event type",
      "description": "Type of event",
      "unitOfMeasure": "",
      "scale": "",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "",
      "typeaheadSearch": [],
      "rules": [
        {
          "type": "Required",
          "config": ""
        },
        {
          "type": "Custom",
          "config": "EventTypeCaptureRule"
        }
      ],
      "enumeration": [
        "Capture",
        "Sighting",
        "Audio",
        "Transmitter",
        "Electronic"
      ]
    },
    {
      "type": "ManyToOne",
      "visibility": "Visible",
      "name": "species",
      "label": "Species",
      "description": "Species of the bird for this event",
      "unitOfMeasure": "",
      "scale": "",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "Species",
      "typeaheadSearch": [
        "name"
      ],
      "rules": []
    },
    {
      "type": "Text",
      "visibility": "Visible",
      "name": "form",
      "label": "Form",
      "description": "Form of the bird for this event",
      "unitOfMeasure": "",
      "scale": "",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "",
      "typeaheadSearch": [],
      "rules": []
    },
    {
      "type": "Enumeration",
      "visibility": "Visible",
      "name": "status",
      "label": "Status",
      "description": "The status of this Bird at the time of the Event",
      "unitOfMeasure": "",
      "scale": "",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "",
      "typeaheadSearch": [],
      "rules": [],
      "enumeration": [
        "Alive",
        "Dead",
        "Unknown",
        "Presumed Dead"
      ]
    },
    {
      "type": "Enumeration",
      "visibility": "Visible",
      "name": "age_class",
      "label": "Age class",
      "description": "The age class of the Bird at the time of the Event",
      "unitOfMeasure": "",
      "scale": "",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "",
      "typeaheadSearch": [],
      "rules": [],
      "enumeration": [
        "Adult",
        "Sub adult",
        "Juvenile",
        "Chick",
        "Egg"
      ]
    },
    {
      "type": "Enumeration",
      "visibility": "Visible",
      "name": "sex",
      "label": "Sex",
      "description": "Sex",
      "unitOfMeasure": "",
      "scale": "",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "",
      "typeaheadSearch": [],
      "rules": [],
      "enumeration": [
        "Male",
        "Female",
        "Unknown"
      ]
    },
    {
      "type": "DateTime",
      "visibility": "Required",
      "name": "date_time",
      "label": "Date time",
      "description": "The date and time of the event",
      "unitOfMeasure": "",
      "scale": "",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "",
      "typeaheadSearch": [],
      "rules": [
        {
          "type": "Required",
          "config": ""
        },
        {
          "type": "Range",
          "config": ",$today"
        }
      ]
    },
    {
      "type": "Double",
      "visibility": "Visible",
      "name": "altitude",
      "label": "Altitude",
      "description": "Altitude",
      "unitOfMeasure": "m",
      "scale": "0",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "",
      "typeaheadSearch": [],
      "rules": [
        {
          "type": "Range",
          "config": "0"
        }
      ]
    },
    {
      "type": "Enumeration",
      "visibility": "Visible",
      "name": "time_precision",
      "label": "Time precision",
      "description": "How accurate is the time value",
      "unitOfMeasure": "",
      "scale": "",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "",
      "typeaheadSearch": [],
      "rules": [],
      "enumeration": [
        "Exact",
        "Day",
        "Night",
        "Unknown"
      ]
    },
    {
      "type": "Double",
      "visibility": "Visible",
      "name": "lat",
      "label": "lat",
      "description": "Latitude in WGS84 coordinates",
      "unitOfMeasure": "",
      "scale": "5",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "",
      "typeaheadSearch": [],
      "rules": []
    },
    {
      "type": "Double",
      "visibility": "Visible",
      "name": "lng",
      "label": "lng",
      "description": "Longitude in WGS84 coordinates",
      "unitOfMeasure": "",
      "scale": "5",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "",
      "typeaheadSearch": [],
      "rules": []
    },
    {
      "type": "Enumeration",
      "visibility": "Visible",
      "name": "data_source",
      "label": "Data source",
      "description": "",
      "unitOfMeasure": "",
      "scale": "",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "",
      "typeaheadSearch": [],
      "rules": [],
      "enumeration": [
        "KIMS",
        "SKYRANGER"
      ]
    },
    {
      "type": "DateTime",
      "visibility": "Visible",
      "name": "end_date_time",
      "label": "End date time",
      "description": "When the event ended",
      "unitOfMeasure": "",
      "scale": "",
      "comparisonField": "",
      "comparisonOperator": "",
      "relationshipTarget": "",
      "typeaheadSearch": [],
      "rules": []
    }
  ]
}